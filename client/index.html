<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>
      CollabCoding
    </title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/css/jquery.treeview.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/css/smoothness/jquery-ui-1.8.22.custom.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/js/codemirror/codemirror.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/js/codemirror/util/simple-hint.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/js/codemirror/theme/ambiance.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/js/codemirror/theme/neat.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/js/codemirror/theme/rubyblue.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="assets/css/site.css" type="text/css" media="screen" charset="utf-8">
    <script type="text/javascript" charset="utf-8" src="assets/js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/jquery-ui-1.8.21.custom.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/jquery.treeview.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/codemirror.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/util/closetag.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/util/simple-hint.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/util/javascript-hint.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/util/html-hint.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/mode/xml/xml.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/mode/javascript/javascript.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/mode/css/css.js"></script>
    <script type="text/javascript" charset="utf-8" src="assets/js/codemirror/mode/htmlmixed/htmlmixed.js"></script>
    <script type="text/javascript" src="/channel/bcsocket.js"></script>
    <script type="text/javascript" src="/share/share.js"></script>
<<<<<<< HEAD
    <script type="text/javascript" src="/share/ace.js"></script>
    <style type="text/css" media="screen">
		#tabs {
			padding: 0;
			width: 100%;
			height: 100%;
		}
		#editor {
			padding: 0;
			width: 100%;
			height: 750px;
		}

    </style>
    <script type="text/javascript" charset="utf-8">
		var randomDocName = function(length) {
			var chars, x;
			if (length == null) {
				length = 10;
			}
			chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-=";
			var name = [];
			for ( x = 0; x < length; x++) {
				name.push(chars[Math.floor(Math.random() * chars.length)]);
			}
			return name.join('');
		};

		$(document).ready(function() {
			$("#project-tree").treeview();
			$("#nav-tabs").tabs();
			$("#tabs").tabs();

			$("#new").bind('click', function() {
				console.log("click");
      });
      // layout
      _height = document.documentElement.clientHeight - $(".navbar").height() - 40;
      $("#editor-area").height(_height);
      $("#nav-tabs").height(_height);


			// set up ace and sharejs
			var editor = ace.edit("editor");
			editor.resize()
			var JavaScriptMode = require("ace/mode/javascript").Mode;
			editor.getSession().setMode(new JavaScriptMode());
			editor.setReadOnly(true);
//			editor.setTheme("ace/theme/chrome");
      editor.setTheme("ace/theme/idle_fingers");

			var docName;
			if (!document.location.hash) {
				docName = '#' + randomDocName();
			} else {
				docName = document.location.hash;
			}
			sharejs.open(docName, 'text', function(error, doc) {
				if (error) {
					console.error(error);
					return;
				};

				doc.attach_ace(editor);
				editor.setReadOnly(false);
			});
			// binding event
			$("#shareDoc").click(function() {
				$("#dialog").attr('title', 'Share via this link');
				$("#shareLink").html(document.location + docName);						
				$("#dialog").dialog({
					show : "blind",
					hide : "explode",
					position : "top",
					modal: true
				});
			});
			
			$("#shareDocOrig").click(function() {
					var toEmail = $("#collaboratorEmail").val();
					console.log(toEmail);
					var shareLink = document.location + docName;
					console.log(shareLink);
					$.ajax({
						type : "POST",
						url : 'http://people.oregonstate.edu/~ghorashs/CollabCoding/sendEmail.php',
						data : {
							to_email : toEmail,
							link : shareLink
						},
						cache : false,
						timeout : 5000,
						success : function(e) {
							console.log('success\n' + e);
						},
						error : function(e) {
							console.log('error\n' + e[0]);
							//alert('Connect Failed');
						},
						complete : function(e) {
							console.log('error complete\n' + e[1]);
							//alert('Complete');
						}
					});
					$('#dialog').dialog("close");
				});
		});

    </script>
=======
    <script type="text/javascript" src="/share/textarea.js"></script> 
    <script type="text/javascript" src="assets/js/site.js"></script>
>>>>>>> 7f076a2941d3fb899cb90394213416ca94a15cdd
  </head>
  <body>
    <!-- Info Bar -->
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <div class="nav-collapse collapse">
<<<<<<< HEAD
               <button title="Share via email" id="shareDoc" style="position: absolute;margin-top:5px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"><span class="ui-button-text">ShareIcon</span></button>    
                  <div id="dialog" style="display:none">                 		
				  	<table style='width:100%'>
				  		<tr>
				  			<td><span id="shareLink"></span></td>
				  		<tr>
				  			<td><input id='collaboratorEmail' style='width:100%; margin:5px 0px 5px 0px' type='email' placeholder='Enter a valid email address'></input></td></tr>
				  		<tr>
				  			<td align='center'>
				  				<button role='button' id='shareDocOrig' style='margin:5px 0px 5px 0px' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only'>
				  					<span class='ui-button-text'>Share</span>
				  				</button>
				  			</td>
				  		</tr>
				  	</table>
                  </div>              
              <div style="text-align:center; padding-top: 10px;">Tool</div>
=======
               <!--<button title="Share via email" id="shareDoc" style="position: absolute;margin-top:5px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"><span class="ui-button-text">ShareIcon</span></button>    -->
               <!--<div id="dialog" style="display:none"></div>-->
               <ul class="nav">
                 <li><a href="#file">File</a></li>
                 <li><a href="#edit">Edit</a></li>
                 <li><a href="#code">Code</a></li>
                 <li><a href="#help">Help</a></li>
               </ul>
              <!--<div style="text-align:center; padding-top: 10px;">Tool</div>-->
>>>>>>> 7f076a2941d3fb899cb90394213416ca94a15cdd
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span2" id="left-items">
          <div id="nav-tabs">
          <ul>
            <li><a href="#project">Project</a></li>
            <li><a href="#chat">Chat</a></li>
          </ul>
          <div id="project">
            <ul id="project-tree" class="filetree">
              <li>
                <span class="folder">Folder 1</span>
                <ul>
                  <li>
                    <span class="file">Item 1.1</span>
                  </li>
                </ul>
              </li>
              <li>
                <span class="folder">Folder 2</span>
                <ul>
                  <li>
                    <span class="folder">Subfolder 2.1</span>
                    <ul id="folder21">
                      <li>
                        <span class="file">File 2.1.1</span>
                      </li>
                      <li>
                        <span class="file">File 2.1.2</span>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <span class="file">File 2.2</span>
                  </li>
                </ul>
              </li>
              <li class="closed">
                <span class="folder">Folder 3 (closed at start)</span>
                <ul>
                  <li>
                    <span class="file">File 3.1</span>
                  </li>
                </ul>
              </li>
              <li>
                <span class="file">File 4</span>
              </li>
            </ul>
          </div>
          <div id="chat" >                 
            blah!blah!blah!
          </div>
        </div>
        </div>
        <div class="span8" id="editor-area">
          <div id="tabs">
            <ul>
              <li>
                <a href="#editor">Untitled</a>
              </li>
              <li style="cursor: pointer;">
                <a href="#new">+</a>
              </li>
            </ul>
            <textarea id="editor" disabled></textarea>
          </div>
        </div>
        <div class="span2" id="right-items">
          <div id="comment">
            <div>
              <div>
                <img src="assets/img/silhouette.png" alt="">
                <div>
                  Charlie
                </div>
                <div style="margin: 3px 0 0 32px;font-size: 11px;color: #666;">
                  4:55 PM Today
                </div>
                <div style="color: black; margin: auto;">
                  test test test test
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
